(()=>{"use strict";var e=[(e,t,n)=>{var o=n(1),r=n.n(o);n(2),n(4);window.jQuery=r(),window.$=r();var i=r()("#js-task-voice-notes");function d(){i.html("<h5>Loading ...</h5>");var e="/task_voice_notes/"+i.data("task-id");r().get(e,(function(e){i.html(e.view)}))}function a(){recordButton.disabled=!0,stopButton.disabled=!1,pauseButton.disabled=!1,navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then((function(e){audioContext=new AudioContext,document.getElementById("formats").innerHTML="Format: 1 channel pcm @ "+audioContext.sampleRate/1e3+"kHz",gumStream=e,input=audioContext.createMediaStreamSource(e),rec=new Recorder(input,{numChannels:1}),rec.record()})).catch((function(e){recordButton.disabled=!1,stopButton.disabled=!0,pauseButton.disabled=!0}))}function c(e){e.preventDefault(),console.log("pauseButton clicked rec.recording=",rec.recording),rec.recording?(rec.stop(),pauseButton.innerHTML="Resume"):(rec.record(),pauseButton.innerHTML="Pause")}function s(){stopButton.disabled=!0,recordButton.disabled=!1,pauseButton.disabled=!0,pauseButton.innerHTML="Pause",rec.stop(),gumStream.getAudioTracks()[0].stop(),rec.exportWAV(u)}function u(e){let t=URL.createObjectURL(e),n=document.createElement("audio"),o=document.createElement("li"),a=document.createElement("a"),c=(new Date).toISOString();n.controls=!0,n.src=t,a.href=t,a.download=c+".wav",a.innerHTML="Save to disk",o.appendChild(n);let s=document.createElement("a");s.href="javascript:void(0);",s.innerHTML="Delete",s.setAttribute("class","btn btn-danger"),s.addEventListener("click",(function(e){e.preventDefault(),e.target.parentNode.remove()})),o.appendChild(s);let u=document.createElement("a");u.href="javascript:void(0);",u.setAttribute("class","btn btn-primary"),u.innerHTML="Upload",u.addEventListener("click",(function(t){let n=new FormData;n.append("voice_memo",e,c),r().ajax({type:"POST",processData:!1,contentType:!1,beforeSend:function(){r()(".add-note-loader").css("visibility","visible")},url:"/add_voice_note/"+i.data("task-id"),data:n,success:function(e){r()(".add-note-loader").css("visibility","hidden"),recordingsList.innerHTML="",d()},error:function(e,t,n){r()(".add-note-loader").css("visibility","hidden"),alert("Something went wrong!")},complete:function(){r()(".add-note-loader").css("visibility","hidden")}})})),o.appendChild(document.createTextNode(" ")),o.appendChild(u),recordingsList.appendChild(o)}r()((function(){d(),URL=window.URL||window.webkitURL;window.AudioContext||window.webkitAudioContext;let e=document.getElementById("recordButton"),t=document.getElementById("stopButton"),n=document.getElementById("pauseButton");e&&e.addEventListener("click",a),t&&t.addEventListener("click",s),n&&n.addEventListener("click",c),r()("body").on("click",".detete-note",(function(){var e;e=r()(this).data("recording-id"),confirm("Are you sure to delete the voice note?")&&r().get("/delete_voice_note/"+e,(function(e){e.success?d():alert("Failed to delete the task")}))}))}))}],t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var i=t[o]={exports:{}};return e[o].call(i.exports,i,i.exports,n),i.exports}n.m=e,(()=>{var e=[];n.O=(t,o,r,i)=>{if(!o){var d=1/0;for(s=0;s<e.length;s++){for(var[o,r,i]=e[s],a=!0,c=0;c<o.length;c++)(!1&i||d>=i)&&Object.keys(n.O).every((e=>n.O[e](o[c])))?o.splice(c--,1):(a=!1,i<d&&(d=i));a&&(e.splice(s--,1),t=r())}return t}i=i||0;for(var s=e.length;s>0&&e[s-1][2]>i;s--)e[s]=e[s-1];e[s]=[o,r,i]}})(),n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={143:0};n.O.j=t=>0===e[t];var t=(t,o)=>{var r,i,[d,a,c]=o,s=0;for(r in a)n.o(a,r)&&(n.m[r]=a[r]);for(c&&c(n),t&&t(o);s<d.length;s++)i=d[s],n.o(e,i)&&e[i]&&e[i][0](),e[d[s]]=0;n.O()},o=self.webpackChunkTasksApp=self.webpackChunkTasksApp||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))})();var o=n.O(void 0,[736],(()=>n(0)));o=n.O(o)})();
//# sourceMappingURL=app.e52365d6.js.map